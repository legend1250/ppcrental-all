
<div id="advance-search" class="main-page clearfix" role="search">
    <div class="container">
        <button class="btn top-btn">Find Your Place</button>
        <form id="adv-search-form" class="clearfix" action="@Url.Action("Searching","Project")" method="GET">
            <fieldset>
                <div class="row">
                    <input class="form-control" type="hidden" name="projectname" id="project-name" placeholder="Project name" value="">
                </div>
                <div class="row">
                    <select class="selectpicker col-sm-3" data-live-search="true" name="district" id="districtSelect" data-style="btn-warning">
                        <option value="0" selected style="font-weight:bold">District</option>
                        @foreach (var item in ViewData["District"] as List<PPCRental.Models.DISTRICT>)
                        {
                            <option data-tokens="@item.DistrictName" value="@item.ID">@item.DistrictName</option>
                        }
                    </select>
                    <select class="selectpicker col-sm-3" data-live-search="true" name="street" id="streetSelect">
                        <option value="0" selected style="font-weight:bold">Street</option>
                        @foreach (var item in ViewData["Street"] as List<PPCRental.Models.STREET>)
                        {
                            <option data-tokens="@item.StreetName" value="@item.District_ID">@item.StreetName</option>
                        }
                    </select>
                    <select class="selectpicker col-sm-3" data-live-search="true" id="wardSelect" name="ward">
                        <option value="0" selected style="font-weight:bold">Ward</option>
                        @foreach (var item in ViewData["Ward"] as List<PPCRental.Models.WARD>)
                        {
                            <option data-tokens="@item.WardName" value="@item.District_ID">@item.WardName</option>
                        }
                    </select>
                </div>
                
                
                <select id="ptype" name="ptype">
                    <option value="0" selected style="font-weight:bold">Type of project</option>
                    @{
                        foreach (var item in ViewData["property_type"] as List<PPCRental.Models.PROPERTY_TYPE>)
                        {
                            <option value="@item.ID">@item.Description</option>
                        }
                    } 
                </select>
                <select name="bedrooms" id="property-beds">
                    <option value="">Beds</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="any">Any</option>
                </select>
                <select name="bathrooms" id="property-baths">
                    <option value="">Bathrooms</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="any">Any</option>
                </select>
                <input type="text" name="min-area" id="property-min-area" placeholder="Min Area (m2)">
                <input type="text" name="max-area" id="property-max-area" placeholder="Max Area (m2)">
                <select name="min-price" id="property-min-price">
                    <option value="any" selected="selected">Min Price</option>
                    <option value="1000">$1000</option>
                    <option value="5000">$5000</option>
                    <option value="10000">$10000</option>
                    <option value="50000">$50000</option>
                    <option value="100000">$100000</option>
                    <option value="200000">$200000</option>
                    <option value="300000">$300000</option>
                    <option value="400000">$400000</option>
                    <option value="500000">$500000</option>
                    <option value="600000">$600000</option>
                    <option value="700000">$700000</option>
                    <option value="800000">$800000</option>
                    <option value="900000">$900000</option>
                    <option value="1000000">$1000000</option>
                    <option value="1500000">$1500000</option>
                    <option value="2000000">$2000000</option>
                    <option value="2500000">$2500000</option>
                    <option value="5000000">$5000000</option>
                </select>
                <select name="max-price" id="property-max-price">
                    <option value="any" selected="selected">Max Price</option>
                    <option value="5000">$5000</option>
                    <option value="10000">$10000</option>
                    <option value="50000">$50000</option>
                    <option value="100000">$100000</option>
                    <option value="200000">$200000</option>
                    <option value="300000">$300000</option>
                    <option value="400000">$400000</option>
                    <option value="500000">$500000</option>
                    <option value="600000">$600000</option>
                    <option value="700000">$700000</option>
                    <option value="800000">$800000</option>
                    <option value="900000">$900000</option>
                    <option value="1000000">$1000000</option>
                    <option value="1500000">$1500000</option>
                    <option value="2000000">$2000000</option>
                    <option value="2500000">$2500000</option>
                    <option value="5000000">$5000000</option>
                    <option value="10000000">$10000000</option>
                </select>
            </fieldset>
            <button type="submit" class="btn btn-default btn-lg text-center">Search <br class="hidden-sm hidden-xs"> Property</button>
        </form>
    </div>
</div>

<script>
    var district_id;
    $('#districtSelect').on('change', function () {
        //alert('Changed');
        district_id = $(this).find(":selected").val();
        console.log('district: ', district_id);
        $.ajax({
            url: '/Project/filterFollowDistrict',
            type: "POST",
            data: { district_id },
            dataType: "json",
            success: function (result) {
                var streets = result.Street;
                var wards = result.Ward;
                //console.log(streets);
                $('#streetSelect').find('option').remove();
                $('#streetSelect').append('<option value="0" selected style="font-weight:bold">Street</option>');
                for (var i = 0; i < streets.length; i++) {
                    $('#streetSelect').append('<option data-tokens="' + streets[i].StreetName + '" value="' + streets[i].Street_ID + '">' + streets[i].StreetName + '</option>');
                }
                $('#streetSelect').selectpicker('refresh');
                //WARDS
                $('#wardSelect').find('option').remove();
                $('#wardSelect').append('<option value="0" selected style="font-weight:bold">Ward</option>');
                for (var i = 0; i < wards.length; i++) {
                    $('#wardSelect').append('<option data-tokens="' + wards[i].StreetName + '" value="' + wards[i].Ward_ID + '">' + wards[i].WardName + '</option>');
                }
                $('#wardSelect').selectpicker('refresh');
            },
            error: function (err) {
                console.log(err);
            }
        });
    })

</script>