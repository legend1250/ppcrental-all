
<div id="advance-search" class="main-page clearfix" role="search">
    <div class="container">
        <button class="btn top-btn">Find Your Place</button>
        <form id="adv-search-form" class="clearfix" action="@Url.Action("Searching","Project")" method="GET">
            <fieldset>
                <div class="row">
                    <input class="col-sm-3" type="text" name="keyword" id="keyword" placeholder="Keyword" value="" style="width: 13%; margin-right: 2%">
                    <select class="selectpicker col-sm-2" data-live-search="true" name="minarea">
                        <option value="0" selected style="font-weight:bold" placholder="Min Area (m2)">Min Area</option>
                        <option data-token="50" value="50">50 m2</option>
                        <option data-token="100" value="100">100 m2</option>
                        <option data-token="150" value="150">150 m2</option>
                        <option data-token="200" value="200">200 m2</option>
                        <option data-token="200" value="300">300 m2</option>
                        <option data-token="200" value="500">500 m2</option>
                    </select>
                    <select class="selectpicker col-sm-2" data-live-search="true" name="maxarea">
                        <option value="0" selected style="font-weight:bold" placholder="Max Area (m2)">Max Area</option>
                        <option data-token="50" value="50">50 m2</option>
                        <option data-token="100" value="100">100 m2</option>
                        <option data-token="150" value="150">150 m2</option>
                        <option data-token="200" value="200">200 m2</option>
                        <option data-token="200" value="300">300 m2</option>
                        <option data-token="200" value="500">500 m2</option>
                    </select>
                </div>
                <div class="row">
                    <select class="selectpicker col-sm-2" data-live-search="true" id="ptype" name="ptype">
                        <option value="0" selected style="font-weight:bold">Type Property</option>
                        @{
                            foreach (var item in ViewData["property_type"] as List<PPCRental.Models.PROPERTY_TYPE>)
                            {
                                <option data-tokens="@item.Description" value="@item.ID">@item.Description</option>
                            }
                        }
                    </select>
                    <select class="selectpicker col-sm-2" data-live-search="true" name="district" id="districtSelect" data-size="9">
                        <option value="0" selected style="font-weight:bold">District</option>
                        @foreach (var item in ViewData["District"] as List<PPCRental.Models.DISTRICT>)
                        {
                            <option data-tokens="@item.DistrictName" value="@item.ID">@item.DistrictName</option>
                        }
                    </select>
                    <select class="selectpicker col-sm-2" data-live-search="true" name="street" id="streetSelect" data-width="fit" data-size="9">
                        <option value="0" selected style="font-weight:bold">Street</option>
                        @foreach (var item in ViewData["Street"] as List<PPCRental.Models.STREET>)
                        {
                            <option data-tokens="@item.StreetName" value="@item.ID">@item.StreetName</option>
                        }
                    </select>
                    <select class="selectpicker col-sm-2" data-live-search="true" id="wardSelect" name="ward" data-width="fit" data-size="9">
                        <option value="0" selected style="font-weight:bold">Ward</option>
                        @foreach (var item in ViewData["Ward"] as List<PPCRental.Models.WARD>)
                        {
                            <option data-tokens="@item.WardName" value="@item.ID">@item.WardName</option>
                        }
                    </select>
                </div>
                <br />
                <div class="row">
                    <select class="selectpicker col-sm-2" data-live-search="true" name="bedrooms" id="property-beds" data-size="9">
                        <option data-token="0" value="0">Beds</option>
                        <option data-token="1" value="1">1</option>
                        <option data-token="2" value="2">2</option>
                        <option data-token="3" value="3">3</option>
                        <option data-token="4" value="4">4</option>
                        <option data-token="5" value="5">5</option>
                        <option data-token="6" value="6">6</option>
                        <option data-token="7" value="7">7</option>
                        <option data-token="8" value="8">8</option>
                        <option data-token="9" value="9">9</option>
                        <option data-token="10" value="10">10</option>
                    </select>
                    <select class="selectpicker col-sm-2" data-live-search="true" name="bathrooms" id="property-baths" data-size="9">
                        <option data-token="0" value="0">Bathrooms</option>
                        <option data-token="1" value="1">1</option>
                        <option data-token="2" value="2">2</option>
                        <option data-token="3" value="3">3</option>
                        <option data-token="4" value="4">4</option>
                        <option data-token="5" value="5">5</option>
                        <option data-token="6" value="6">6</option>
                        <option data-token="7" value="7">7</option>
                        <option data-token="8" value="8">8</option>
                        <option data-token="9" value="9">9</option>
                        <option data-token="10" value="10">10</option>
                    </select>
                    <select class="selectpicker col-sm-2" data-live-search="true" name="minprice" id="property-min-price" data-size="9">
                        <option value="0" selected="selected">Min Price</option>
                        <option data-token="1000" value="1000">$1.000</option>
                        <option data-token="5000" value="5000">$5.000</option>
                        <option data-token="10000" value="10000">$10.000</option>
                        <option data-token="20000" value="20000">$20.000</option>
                        <option data-token="30000" value="30000">$30.000</option>
                        <option data-token="50000" value="50000">$50.000</option>
                        <option data-token="70000" value="70000">$70.000</option>
                        <option data-token="100000" value="100000">$100.000</option>
                        <option data-token="200000" value="200000">$200.000</option>
                        <option data-token="300000" value="300000">$300.000</option>
                        <option data-token="500000" value="500000">$500.000</option>
                        <option data-token="700000" value="700000">$700.000</option>
                        <option data-token="1000000" value="1000000">$1.000.000</option>
                        <option data-token="1500000" value="1500000">$1.500.000</option>
                        <option data-token="2000000" value="2000000">$2.000.000</option>
                        <option data-token="2500000" value="2500000">$2.500.000</option>
                        <option data-token="5000000" value="5000000">$5.000.000</option>
                        <option data-token="10000000" value="10000000">$10.000.000</option>
                    </select>
                    <select class="selectpicker col-sm-2" data-live-search="true" name="maxprice" id="property-max-price" data-size="9">
                        <option value="0" selected="selected">Max Price</option>
                        <option data-token="1000" value="1000">$1.000</option>
                        <option data-token="5000" value="5000">$5.000</option>
                        <option data-token="10000" value="10000">$10.000</option>
                        <option data-token="20000" value="20000">$20.000</option>
                        <option data-token="30000" value="30000">$30.000</option>
                        <option data-token="50000" value="50000">$50.000</option>
                        <option data-token="70000" value="70000">$70.000</option>
                        <option data-token="100000" value="100000">$100.000</option>
                        <option data-token="200000" value="200000">$200.000</option>
                        <option data-token="300000" value="300000">$300.000</option>
                        <option data-token="500000" value="500000">$500.000</option>
                        <option data-token="700000" value="700000">$700.000</option>
                        <option data-token="1000000" value="1000000">$1.000.000</option>
                        <option data-token="1500000" value="1500000">$1.500.000</option>
                        <option data-token="2000000" value="2000000">$2.000.000</option>
                        <option data-token="2500000" value="2500000">$2.500.000</option>
                        <option data-token="5000000" value="5000000">$5.000.000</option>
                        <option data-token="10000000" value="10000000">$10.000.000</option>
                    </select>
                </div>
            </fieldset>
            <button type="submit" class="btn btn-default btn-lg text-center" style="margin-left: -15%;">Search <br class="hidden-sm hidden-xs"> Property</button>
        </form>
    </div>
</div>

<script>
    var district_id;
    $('#districtSelect').on('change', function () {
        //alert('Changed');
        district_id = $(this).find(":selected").val();
        console.log('district: ', district_id);
        $.ajax({
            url: '/Project/filterFollowDistrict',
            type: "POST",
            data: { district_id },
            dataType: "json",
            success: function (result) {
                var streets = result.Street;
                var wards = result.Ward;
                //console.log(streets);
                $('#streetSelect').find('option').remove();
                $('#streetSelect').append('<option value="0" selected style="font-weight:bold">Street</option>');
                for (var i = 0; i < streets.length; i++) {
                    $('#streetSelect').append('<option data-tokens="' + streets[i].StreetName + '" value="' + streets[i].Street_ID + '">' + streets[i].StreetName + '</option>');
                }
                $('#streetSelect').selectpicker('refresh');
                //WARDS
                $('#wardSelect').find('option').remove();
                $('#wardSelect').append('<option value="0" selected style="font-weight:bold">Ward</option>');
                for (var i = 0; i < wards.length; i++) {
                    $('#wardSelect').append('<option data-tokens="' + wards[i].StreetName + '" value="' + wards[i].Ward_ID + '">' + wards[i].WardName + '</option>');
                }
                $('#wardSelect').selectpicker('refresh');
            },
            error: function (err) {
                console.log(err);
            }
        });
    })

</script>